# Scrt

Scrt(ソクラト)はSATソルバ(MiniSat)を利用した命題論理の自動証明および質問応答システムです．

## できること

* 命題論理式で表された任意の問題の充足可能性をチェックできます．（CNFに変換してMiniSatで解く）
* 命題論理式がパラドックスを含むかチェックできます．
* 命題論理式で表された知識ベース(KB)が与えられた時に，質問Qが論理的に正しいか？という問題が解けます．

現在，一階述語論理(FOL)への拡張を試みています．


## 問題例

### 充足可能性チェック
「充足可能性問題」というのは「与えられた命題論理式を満たすような変数割当が存在するか調べよ．また割当が存在する場合はそのうちの一つを出力せよ．」という問題です．

簡単に言うと，「PとかQとかの変数で作られた論理式がTrueになることはあるでしょうか？あるならその時のPとかQとかの変数の値を教えてください」という問題です．

* 「Pかつ（Pではない）」という命題論理式をTrueにするようなPはあるか？

PがTrueでもFalseでも，与えられた命題論理式をTrueにすることはできないのでFalseを返します．

* 「Pかつ(PならばQ)」という命題論理式をTrueにするようなP, Qはあるか？

P=True, Q=Trueで与えられた命題論理式をTrueにできるのでTrueを返します．また，この時のPとQを返します．


### 質問応答
「与えられた事実が成り立つ時，質問されたことは正しいか？」という問題です．
論理的に正しい場合はTrue，論理的に間違っている場合はFalse，正しいか正しくないか判断できない場合はNoneを返します．

* 事実「Pかつ(PならばQ)」が成り立つ
* 質問「Q」は成り立つか？

事実から質問が論理的に正しいことがわかるのでTrueを返します．

* 事実「PならばQ」が成り立つ
* 質問「Q」は成り立つか？

事実からでは質問が正しいかどうかわかりませんので，Noneを返します．

* 事実「P」が成り立つ
* 質問「Pではない」は成り立つか？

事実から質問は絶対に成り立たないので，Falseを返します．

## 使い方
利用するためにはMiniSatをインストールする必要があります．
`$ minisat`コマンドで利用可能であることを確認してください．

以下はサンプルプログラムです．
```
from scrt.sat_solver import SatSolver

p = SatSolver.atom('p')
q = SatSolver.atom('q')

KB = p & (p >> q)
Q = q

print(SatSolver.ask(KB, Q))  # => True
```
論理式の変数は`SatSolver.atom()`で宣言します．
サンプルプログラムでは変数`p`と`q`を定義しています．

論理式は`&`（かつ），`|`（または），`~`（否定），`>>`（左ならば右）`<<`（右ならば左），`()`（括弧）でつないで式にできます．
サンプルプログラムでは「pかつ（pならばq）」という命題論理式をKB（Knowledge Base）に，「q」という命題論理式をQ（Question）に代入しています．

`SatSolver.ask(事実を表す命題論理式, 質問を表す命題論理式)`と呼び出すことで質問を行うことができます．
論理的に必ず成り立つときは`True`，論理的に必ず成り立たないときは`False`，どちらとも言えない場合は`None`が返されます．
サンプルプログラムでは「pかつ（pならばq）」が成立するならば，「q」は成立するか？という質問を行っています．
この場合は「q」は論理的に必ず成立するので，結果は`True`になります．

また，事実の中にパラドックス（例えば「pかつ(pではない)」など）が含まれていると正しい推論はできませんから，その場合はエラーを発生させます．

